(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))e(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&e(o)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function e(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function t(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(e){if(e.ep)return;e.ep=!0;const r=t(e);fetch(e.href,r)}})();var q=Object.defineProperty,S=(c,t,a)=>t in c?q(c,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[t]=a,E=(c,t,a)=>(S(c,t+"",a),a);(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function t(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(e){if(e.ep)return;e.ep=!0;const r=t(e);fetch(e.href,r)}})();const O=c=>{const t=new CSSStyleSheet;return t.replaceSync(c),[t]},D=c=>{const t=document.createElement("template");return t.innerHTML=c,t.content.cloneNode(!0)};function I(c,t,a={}){this.root=this.attachShadow({mode:"open",...a}),this.root.appendChild(D(c)),this.root.adoptedStyleSheets=O(t)}const R=`<!---------------------    My Calculator Container   --------------------->\r
<div class="calc-container" tabindex="1">\r
\r
    <!------------------    Heading   ------------------>\r
    <div class="calc-heading">\r
        <p>My Calculator</p>\r
    </div>\r
\r
    <!------------------    Display   ------------------>\r
    <div class="calc-display">\r
        <div id="output">\r
            <input type="text" inputmode="none" placeholder="Enter input..." tabindex="1.2">\r
        </div>\r
        <div id="error-msg"></div>\r
    </div>\r
\r
    <!------------------    Keys   ------------------>\r
    <div class="calc-keys">\r
        <!------------------------    Row 1   ------------------------>\r
        <div id="reset-key" class="calc-key" title="All Clear (Reset)" tabindex="2">AC</div>\r
        <div class="calc-key orange-keys" id="inverse-key" title="Inverse (Reciprocal)" tabindex="3">\r
            <img id="img-inverse-key" src="./resources/images/x-inverse.png" alt="x-inverse-key" width="35" height="35">\r
        </div>\r
        <div class="calc-key orange-keys" id="squared-key" title="Squared" tabindex="4">\r
            <img id="img-squared-key" src="./resources/images/x-square.png" alt="x-squared-key" width="25" height="25">\r
        </div>\r
        <div class="calc-key orange-keys" id="sqrt-key" title="Square Root" tabindex="5">\r
            <img id="img-sqrt-key" src="./resources/images/sqrt.png" alt="sqrt-key" width="40" height="40">\r
        </div>\r
\r
        <!------------------------    Row 2   ------------------------>\r
        <div class="calc-key blue-keys" id="parenthesis-key" title="Parenthesis" tabindex="6">\r
            ()\r
        </div>\r
        <div class="calc-key blue-keys" id="factorial-key" title="Factorial ( a! )" tabindex="7">\r
            !\r
        </div>\r
        <div class="calc-key blue-keys" id="exponent-key" title="Exponent (x ^ y)" tabindex="8">\r
            <img id="img-exponent-key" src="./resources/images/x-power-y.png" alt="exponent-key" width="30" height="30">\r
        </div>\r
        <div class="calc-key blue-keys" style="font-size:42px;font-family:monospace" id="divide-key"\r
            title="Divide (a / b)" tabindex="9">\r
            &divide;\r
        </div>\r
\r
        <!------------------------    Row 3   ------------------------>\r
        <div class="calc-key black-keys" id="key-7" tabindex="22">7</div>\r
        <div class="calc-key black-keys" id="key-8" tabindex="23">8</div>\r
        <div class="calc-key black-keys" id="key-9" tabindex="24">9</div>\r
        <div class="calc-key blue-keys" id="multiply-key" title="Multiply (a x b)" tabindex="10">\r
            <i id="img-multiply-key" class="material-icons" style="font-size:32px;">close</i>\r
        </div>\r
\r
        <!------------------------    Row 4   ------------------------>\r
        <div class="calc-key black-keys" id="key-4" tabindex="19">4</div>\r
        <div class="calc-key black-keys" id="key-5" tabindex="20">5</div>\r
        <div class="calc-key black-keys" id="key-6" tabindex="21">6</div>\r
        <div class="calc-key blue-keys" id="subtract-key" title="Subtract (a - b)" tabindex="11">\r
            <i id="img-subtract-key" class="material-icons" style="font-size:35px;">remove</i>\r
        </div>\r
\r
        <!------------------------    Row 5   ------------------------>\r
        <div class="calc-key black-keys" id="key-1" tabindex="16">1</div>\r
        <div class="calc-key black-keys" id="key-2" tabindex="17">2</div>\r
        <div class="calc-key black-keys" id="key-3" tabindex="18">3</div>\r
        <div class="calc-key blue-keys" id="add-key" title="Add (a + b)" tabindex="12">\r
            <i id="img-add-key" class="material-icons" style="font-size:35px;">add</i>\r
        </div>\r
\r
        <!------------------------    Row 6   ------------------------>\r
        <div class="calc-key black-keys" id="decimal-point-key" title="Decimal point" tabindex="25">.</div>\r
        <div class="calc-key black-keys" id="key-0" tabindex="15">0</div>\r
        <div class="calc-key black-keys" id="backspace-key" title="Backspace" tabindex="14">\r
            <i id="img-backspace-key" class="material-icons" style="font-size: 30px;margin-right: 2px">\r
                backspace\r
            </i>\r
        </div>\r
        <div id="equal-key" class="calc-key" style="font-size:41px;font-family:monospace" title="Equals (Calculate)"\r
            tabindex="13">\r
            =\r
        </div>\r
\r
    </div>\r
</div>`,T='@import"https://fonts.googleapis.com/icon?family=Material+Icons";.calc-container{-webkit-user-select:none;user-select:none;display:inline-block;-ms-overflow-style:none;scrollbar-width:none;width:360px;margin:50px;padding:10px;border-radius:25px;border:15px ridge rgb(165,165,165);background-image:linear-gradient(0deg,#000,#000764);box-shadow:15px 15px 15px #36363699}::-webkit-scrollbar{display:none;width:0px}.calc-heading{margin:-25px 0 -15px;border-radius:15px;background-image:linear-gradient(45deg,#ff25ed80,#ff2d6c80)}.calc-heading>p{display:flex;justify-content:center;align-items:center;text-align:center;padding:10px;font-family:Georgia,Times New Roman,Times,serif;font-size:25px;font-weight:700;color:#d6d6d6}.calc-display{color:#ebebeb;font-family:Verdana,Geneva,Tahoma,sans-serif;height:100px;margin:10px 0;padding:1px;border-radius:15px;background-color:#4b4b4b}#output{display:flex;justify-content:flex-start}#output>input{display:inline-block;overflow:scroll;border:none;outline:none;line-height:55px;caret-color:#00aeff;margin:0 10px;font-size:32px;font-family:Verdana,Geneva,Tahoma,sans-serif;background-color:#4b4b4b;color:#ebebeb}#error-msg{margin:0 10px;overflow:scroll;color:#ff5715;font-size:21px}.calc-keys{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:flex-end;padding:0;margin:10px}.calc-key{display:flex;justify-content:center;align-items:center;margin:4px;width:70px;height:55px;font-size:25px;font-family:Verdana,Geneva,Tahoma,sans-serif;border-radius:50%}.calc-key:hover{cursor:pointer;box-shadow:4px 4px 15px #adadad99}.calc-key:active{cursor:pointer;border-radius:15px}#equal-key{color:#080808;background-color:#c8fffc}#equal-key:hover{color:#080808;background-color:#e4fffe}#reset-key{color:#080808;background-color:#99e299}#reset-key:hover{color:#080808;background-color:#b8ffb8}#parenthesis-key{font-family:monospace;font-weight:700}#factorial-key{font-family:Georgia,Times New Roman,Times,serif;font-size:35px}.blue-keys{color:#080808;background-color:#00aeff}.blue-keys:hover{color:#080808;background-color:#7cd5ff}.orange-keys{color:#080808;background-color:#c47f00}.orange-keys:hover{color:#080808;background-color:#fca400}.black-keys{color:#ebebeb;background-color:#3d3d3d}.black-keys:hover{color:#ebebeb;background-color:#5a5a5a}.black-keys:active{color:#ebebeb;background-color:#646464}';class h extends HTMLElement{constructor(){super(),I.call(this,R,T),this.setOnclickForAllKeys(),this.getOutputElement().focus()}attributeChangedCallback(t,a,e){const r=this.root.querySelector(".calc-container"),i=t==="width"||t==="height"||t==="margin"||t==="calc-name"||t==="calc-input"?t:"borderRadius",o=r==null?void 0:r.querySelector(".calc-heading > p");if(i==="calc-name"&&(e==null?void 0:e.trim())!==""&&o!=null&&o.textContent)o.textContent=e;else if(i==="calc-input"&&/^[\d\.\+\-\x\/\^\!\(\)]+$/.test(e)){const n=r==null?void 0:r.querySelector("#output > input");if(!(n!=null&&n.value))return;n.value=e,n.focus()}else r!=null&&r.style&&(r.style[i]=e)}setOnclickForAllKeys(){const t=this.root.querySelector("#output > input"),a=this.root.querySelectorAll(".calc-keys")[0];let e,r;const i=l=>{this.resetDisplay(),this.insertChar(t,l),t.focus()},o=()=>{this.resetDisplay(),t.value="",t.focus()},n=()=>{this.calculateResult("**-1"),t.focus()},k=()=>{this.calculateResult("**2"),t.focus()},f=()=>{this.calculateResult("**0.5"),t.focus()},u=()=>{e=this.getDisplayTextBeforeCaret(t);let l=0,s=0;const d=e.charAt(e.length-1);e.forEach(y=>{l+=y==="("?1:0,s+=y===")"?1:0}),r=l===s?"(":d==="("||d===")"?d:/[\d\.\!]/.test(d)?")":"(",this.insertChar(t,r)},p=()=>{this.resetDisplay(),e=this.getDisplayTextBeforeCaret(t),r=e===""||/[\^\(]$/.test(e)?"":/[\-\+\x\/\.]$/.test(e)?this.replaceOperator(t,"^"):"^",this.insertChar(t,r)},g=()=>{this.resetDisplay(),e=this.getDisplayTextBeforeCaret(t),r=e===""||/[\(]$/.test(e)?"":/[\-\+\x\^\/\.]$/.test(e)?this.replaceOperator(t,"!"):"!",this.insertChar(t,r)},b=()=>{this.resetDisplay(),e=this.getDisplayTextBeforeCaret(t),r=e===""||/[\/\(]$/.test(e)?"":/[\-\+\x\^]$/.test(e)?this.replaceOperator(t,"/"):"/",this.insertChar(t,r)},m=()=>{this.resetDisplay(),e=this.getDisplayTextBeforeCaret(t),r=e===""||/[\x\(]$/.test(e)?"":/[\-\+\/\^]$/.test(e)?this.replaceOperator(t,"x"):"x",this.insertChar(t,r)},v=()=>{this.resetDisplay(),e=this.getDisplayTextBeforeCaret(t),r=/[\-]$/.test(e)?"":/[\+\.]$/.test(e)?this.replaceOperator(t,"-"):"-",this.insertChar(t,r)},x=()=>{this.resetDisplay(),e=this.getDisplayTextBeforeCaret(t),r=e===""||/[\+\(]$/.test(e)?"":/[\-\.\x\/\^]$/.test(e)?this.replaceOperator(t,"+"):"+",this.insertChar(t,r)},w=()=>{this.resetDisplay();let l=this.getCaretPosition(t);const s=t.value.split("");s.splice(--l,1),t.value=s.join(""),t.setSelectionRange(l,l),t.focus()},A=()=>{this.calculateResult(""),this.getOutputElement().focus()},C=()=>{this.resetDisplay(),e=this.getDisplayTextBeforeCaret(t),r=e===""?"0.":/[\.]$/.test(e)?"":".",this.insertChar(t,r)};a.addEventListener("click",l=>{var s;switch((s=l==null?void 0:l.target)==null?void 0:s.id){case"reset-key":o();break;case"inverse-key":case"img-inverse-key":n();break;case"squared-key":case"img-squared-key":k();break;case"sqrt-key":case"img-sqrt-key":f();break;case"parenthesis-key":u();break;case"exponent-key":case"img-exponent-key":p();break;case"factorial-key":g();break;case"divide-key":b();break;case"multiply-key":case"img-multiply-key":m();break;case"subtract-key":case"img-subtract-key":v();break;case"add-key":case"img-add-key":x();break;case"backspace-key":case"img-backspace-key":w();break;case"equal-key":A();break;case"decimal-point-key":C();break;case"key-0":i("0");break;case"key-1":i("1");break;case"key-2":i("2");break;case"key-3":i("3");break;case"key-4":i("4");break;case"key-5":i("5");break;case"key-6":i("6");break;case"key-7":i("7");break;case"key-8":i("8");break;case"key-9":i("9");break}}),a.addEventListener("keydown",l=>{var s,d;if((d=(s=l==null?void 0:l.target)==null?void 0:s.className)!=null&&d.includes("calc-key")){const y=l.target;(l==null?void 0:l.key)===" "&&(y.click(),setTimeout(()=>{y.id!=="squared-key"&&y.id!=="img-squared-key"&&this.root.querySelector("#backspace-key").click(),y.focus()},1))}}),t.addEventListener("focus",()=>{const l=this.getCaretPosition(t);t.setSelectionRange(l,l)}),t.addEventListener("keydown",l=>{const{key:s}=l;t.disabled=!/(\d|Backspace|Delete|Home|End|ArrowLeft|ArrowRight|Tab)/.test(s);const d=s==="("||s===")"?"parenthesis-key":s==="!"?"factorial-key":s==="*"?"multiply-key":s==="Enter"||s==="="?"equal-key":s==="."?"decimal-point-key":s==="-"?"subtract-key":s==="+"?"add-key":s==="/"?"divide-key":s==="^"?"exponent-key":s==="Escape"?"reset-key":null;d&&this.root.querySelector(`#${d}`).click(),s!=="Tab"&&setTimeout(()=>{t.disabled=!1,t.focus()},10)})}insertChar(t,a){const e=t,r=e.value.split("");if(a==="replaced")return;if(a===""){e.focus();return}let i=this.getCaretPosition(e);r.splice(i,0,a),e.value=r.join(""),i+=i===-1?2:1,i+=a==="0."?1:0,e.setSelectionRange(i,i),e.focus()}getCaretPosition(t){return t?t.selectionStart||t.value.length-1:0}getDisplayTextBeforeCaret(t){const a=this.getCaretPosition(t);return t.value.substring(0,a)}replaceOperator(t,a){const e=t,r=this.getCaretPosition(e),i=e.value.split("");return i.splice(r-1,1,a),e.value=i.join(""),e.setSelectionRange(r,r),e.focus(),"replaced"}parseExpression(t){return t.replaceAll("x","*").replaceAll("^","**").replaceAll(".e","e").replaceAll(")(",")*(").replaceAll("0(","0*(").replaceAll("1(","1*(").replaceAll("2(","2*(").replaceAll("3(","3*(").replaceAll("4(","4*(").replaceAll("5(","5*(").replaceAll("6(","6*(").replaceAll("7(","7*(").replaceAll("8(","8*(").replaceAll("9(","9*(").replaceAll(".(","*(").replaceAll("!(","!*(").replaceAll(").",")*").replaceAll(")0",")*0").replaceAll(")1",")*1").replaceAll(")2",")*2").replaceAll(")3",")*3").replaceAll(")4",")*4").replaceAll(")5",")*5").replaceAll(")6",")*6").replaceAll(")7",")*7").replaceAll(")8",")*8").replaceAll(")9",")*9")}calculateResult(t){this.resetDisplay();const a=this.getOutputElement();let e=a.value;if(e==="")return;e=this.parseExpression(e),e+=t;let r;try{if(/^!/.test(e))throw"Invalid Input";for(;/!/.test(e);)e=this.parseFactorialInput(e);if(r=Function(`return ${e}`)(),r===1/0||r===-1/0)throw"Value too large";if(r===!0||r===!1)throw"Invalid Input";r.toString().length>14&&(r>10**14?r=r.toExponential(8):r>1?r=r.toPrecision(14):r<1&&(r=r.toExponential(8))),r=r.toString().replaceAll("e",".e"),a.value=r}catch(i){const o=this.getErrorMsgElement(),n=typeof i=="string"?i:"Invalid Input";a.style.color="rgb(255, 87, 21)",o.textContent=n}}parseFactorialInput(t){const a=t.indexOf("!"),e=t.charAt(a+1);let r=a-1,i=t.charAt(r),o=0,n=[];if(!/[\d\)]/.test(i))throw"Invalid Input";if(i===")"){let u="",p=r,g=0,b=1;for(;i!=="("||g!==b;){if(p===0)throw"Invalid Input";u+=t.charAt(p--),i=t.charAt(p),i===")"&&b++,i==="("&&g++}return u+="(",u=u.split("").reverse().join(""),u=new Function(`return ${u}`)(),o=this.getFactorialOf(Number(u)),n=t.split(""),n.splice(p,r-p+2,o.toString()),n.join("")}let k=0,f=0;for(;/\d/.test(i);)k+=parseInt(t.charAt(r),10)*10**f++,i=t.charAt(--r);if(/[\.]/.test(i))throw"Invalid Input";return o=this.getFactorialOf(k),n=t.split(""),/[\d\.\(]/.test(e)&&(o=`${o.toString()}*`),n.splice(r+1,f+1,o.toString()),n.join("")}getFactorialOf(t){let a=t;if(a===0)return 1;if(a<=2)return a;for(let e=a-1;e>=2;--e)if(a*=e,a===1/0)throw"Value too large";return a}getOutputElement(){return this.root.querySelector("#output > input")}getErrorMsgElement(){return this.root.querySelector("#error-msg")}resetDisplay(){const t=this.getOutputElement(),a=this.getErrorMsgElement(),e=a.textContent;(e==="Invalid Input"||e==="Value too large")&&(t.style.color="rgb(235, 235, 235)",a.textContent="")}}E(h,"observedAttributes",["calc-name","calc-input","width","height","margin","border-radius"]);customElements.define("my-calculator",h);
